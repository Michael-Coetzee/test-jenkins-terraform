#!groovyâ€‹

pipeline {
    agent { label 'cordfinance' } 
    stages { 
        stage('pull image') {
            steps {
                script {
                    docker.withRegistry('https://terraformtest.azurecr.io/terraform-az', 'test-terraform') {
                        image = docker.image('terraform-az:latest')
                        image.pull()
                    }
                }
            }
        }
        stage('Init parameters') {
            steps {
                  sh "docker run -i -t terraformtest.azurecr.io/terraform-az terraform init -input=false"
            }
        }
    }
} 